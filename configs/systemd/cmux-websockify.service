[Unit]
Description=Cmux VNC WebSocket proxy
After=cmux-x11vnc.service
Requires=cmux-x11vnc.service

[Service]
Type=simple
ExecStartPre=/bin/mkdir -p /var/log/cmux
ExecStart=/usr/local/lib/cmux/cmux-vnc-proxy
Environment="CMUX_VNC_PROXY_PORT=39380"
Environment="CMUX_VNC_TARGET_PORT=5901"
Environment="CMUX_VNC_TARGET_HOST=127.0.0.1"
Environment="CMUX_VNC_WEB_DIR=/usr/share/novnc"
Restart=always
RestartSec=3
StandardOutput=append:/var/log/cmux/vnc-proxy.log
StandardError=append:/var/log/cmux/vnc-proxy.log

[Install]
WantedBy=cmux.target
